# Unity Shader知识总结
## 基础
### 1. 顶点着色器输入参数语义(Type Name : Semantic)
  - __POSITION__（float4）
  - __TANGENT__（float4，顶点切线）
  - __NORMAL__（float3）
  - __TEXCOORD0__、TEXCOORD1、TEXCOORD2、TEXCOORDn（float2或float4, shader Model 2\3中n=8，在5、6中n=16，appdata_full中最多使用6）
  - __COLOR__（fixed4或float4）
  
### 2. unity的uniform关键字
  - uniform 关键词是Cg中修饰变量和参数的一种修饰词，它仅仅用于提供一些关于该变量的初始值是如何指定和存储的相关信息, __与其他图形接口中的uniform关键词不太一样__ 在unity中uniform可以省略
  
### 3. OpenGL和DirectX的坐标
  - OpenGL坐标原点在左下方, DirectX在左上方
  - 一般来说unity会帮我们处理坐标不同的情况
  - 除了开启了抗锯齿并在此时使用了渲染到纹理技术时不会帮我们处理
  - 噪声纹理一般对y坐标不敏感
  
### 4. 精度数值类型
  - __float__: 32位
  - __half__: 16位，精度-60000~+60000
  - __fixed__: 11位，精度-2.0~+2.0
  - 大部分PC的GPU会直接使用最高精度数值计算，很难看出half和fixed精度带来的不同；移动平台GPU会有
  - fixed 精度较旧的平台会使用，现代一般把half和fixed同等对待
 
## unity中的基础纹理
### 5. 法线纹理储存空间
1. 模型空间
   - 实现简单，更加直观（不用计算空间变换）
   - 可以提供平滑的边界（边缘或尖锐处）
   
2. 切线空间
   - 自由度高（多个网格重用）
   - 可进行uv动画 （移动uv值实现凹凸纹理移动）
   - 可以重用法线纹理 （不同面重用）
   - 可压缩 （切线空间中z方向总是正方向？？？，而模型空间中不是）
   
 ### 6. 渐变纹理
  - 使用一维纹理，uv方向都映射到该维度，可以使用半兰伯特模型
  - Wrap Mode使用Clamp模式，避免会出现1.00001映射到0.00001
  
### 7. 遮罩纹理
  - 用于部分高光的情况，镜面高光贴图
  
## 透明效果
### 8. 透明度测试
  - 根据透明度来舍弃一些片元
  - 效果极端，要么透明，要么不透明，__无法实现半透明效果__
  - 不需要关闭深度测试和深度写入
    
### 9. 透明度混合
  - 可以实现半透明效果
  - 关闭深度写入，但不关闭深度测试
  - 相当于对深度缓存是只读的
  
### 10. 渲染顺序
  - 避免渲染顺序和半透明片元关闭深度写入导致混合操作的不正确
  - 先渲染不透明的物体
  - 对半透明的物体进行排序，先渲染远的片元，此时要开启深度测试但 __关闭深度写入
  
### 11. unity渲染队列
  - __Background:__ 背景物体，先渲染
  - __Geometry:__ 默认队列，不透明物体使用
  - __AlphaTest:__ 使用透明度测试实现透明效果
  - __Transparent:__ 会在Geometry和AlphaTest后渲染，透明度混合使用（关闭深度写入的都应该使用）
  - __Overlay:__ 实现叠加效果，最后渲染
  
### 12. unity透明度混合
  - Blend 记得开启
  - 开启深度写入的半透明的效果
    - 使用多一个Pass用于写入深度数据
    ```
    Pass{
      ZWrite On
      ColorMask 0   //用于说明不写入颜色数据
    }
    ```
    
### 13. 双面渲染的透明效果
  - 透明度测试
    - 关闭背面剔除 ```Cull Off```
    
  - 透明度混合
    - 直接关闭背面剔除无法保证同一个物体的面的渲染顺序
    - 多一个Pass，一个只渲染背面，一个只渲染正面
    - 先渲染背面，在渲染正面
